# 최종실습

## 1. eb 애플리케이션, 환경 생성

- eb 애플리케이션 생성은 생략..

- eb 환경 생성
  1. Node 플랫폼 설정
     ![eb-create](/resources/eb-create.png)
     - 추후에 이야기 하겠지만(`소스 빌드와 관련`) Node 플랫폼을 설정하면, `기본적으로 Ngnix 설정이 되어있다.`
       - https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/create_deploy_nodejs.container.html
       - CSR 라우터를 위한 설정도 되어있음..?
         ```conf
         location / {
             try_files $uri /index.html;
         }
         ```
  2. 오토스케일링 설정을 위한 가용성 선택
    ![eb-detail-ready](/resources/eb-detail-ready.png)
  3. 오토 스케일링, 로드밸런서, 배포 형태 설정
    ![eb-detail-settings](/resources/eb-detail-settings.png)
    
## 2. Github Action 설정

- Github Action이란
    - Github, Bitbucket, Gitlab, AWS등 개발 플랫폼에서는 `스크립트 형태의 파이프라인 서비스를 제공해줌`
    - Github Action은 Github에서 제공해주는 위와 같은 형태의 서비스
    - `주로 CI, CD와 관련`

## 3. 배포 스크립트

- https://github.com/zxczoxc125/aws-ci-cd/blob/main/.github/workflows/deployment-production.yml

## 4. 배포 관련 특시사항

- eb의 배포 프로세스에서, `사용자가 빌드에는 관여할 수 없는 것 같다.`
    - `원본 소스`의 zip 파일의 형태를 제공
    - 현 숨고 force2와 비교
        - https://github.com/Soomgo-Frontend/Soomgo-Force-2/blob/master/bitbucket-pipelines.yml
    - 빗버킷 - eb 파이프
        - https://support.atlassian.com/bitbucket-cloud/docs/deploy-to-aws-with-elastic-beanstalk
    - aws 콘솔로 봐도 원본소스의 zip 파일을 업로드해서 배포함
    - 기타 다양한 cli들도 마찬가지
- eb Ngnix ???
    - 위 링크에 있듯이, [eb - Node 플랫폼]에서는 `기본적으로 설정`되어있다.
    - 환경을 덮어씌워줄 수도 있음
    - 브라우저 URL 해석 문제 (`router 새로고침 404`)도 기본적으로 설정되어 있음
        - (참고: https://stackoverflow.com/questions/27928372/react-router-urls-dont-work-when-refreshing-or-writing-manually)