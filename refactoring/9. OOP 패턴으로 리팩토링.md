# 9. OOP 패턴으로 리팩토링

#### # 패턴

* 떠도는 모든 패턴을 암기할 필요는 없지만, `7가지 유용한 패턴`을 소개한다.

## 9.1 템플릿 메서드

#### # ** `객체의 if 분기`

* ** 특정 객체의 if 분기를 발견하면, `하위 객체로 분리할 수 있음`을 인지하고 있어야 한다.
  * 추출 전
    ```javascript
    class Person {
      constructor(binaryKnowledge) {
        this.binaryKnowledge = binaryKnowledge;
      };
      log(number) { // 하나의 Person 내에서 if 분기로 처리하고 있다.
        if (this.binaryKnowledge) {
          return Number('0b' + number);
        } else {
          return number;
        }
      };
    }

    const person_1 = new Person(true);
    const person_2 = new Person(false);

    console.log(person_1.log(10)); // 2
    console.log(person_2.log(10)); // 10
    ```
  * 추출 후(A)
    ```javascript
    class Person {
      constructor(binaryKnowledge) {
        this.binaryKnowledge = binaryKnowledge;
      };
    }

    class BinaryPerson extends Person { // 하위 객체 1 - BinaryPerson
      log(number) {
        return this.whatIsInBinary(number);
      };
      whatIsInBinary(number) {
        return Number('0b' + number);
      };
    }

    class NomalPerson extends Person { // 하위 객체 2 - NomalPerson
      log(number) {
        return this.whatIs(number);
      };
      whatIs(number) {
        return number;
      };
    }

    const binaryKnowledge = new BinaryPerson(true);
    const normalPerson = new NomalPerson(false);

    console.log(binaryKnowledge.log(10)); // 2
    console.log(normalPerson.log(10)); // 10
    ```

#### # ** 같은 목적을 수행하는 `비슷한 두 알고리즘`

* **`공통으로 사용하는 메서드의 call(호출)`(== `수행 알고리즘`)을 상위 객체에서 `'정의'`하고, `'세부 구현'`은 하위 객체에서 하는 것을 `템플릿 메서드 패턴`이라고 한다.
  * 추출 전 - 바로 위 `A 상태`
  * 추출 후
    ```javascript
    class Person {
      constructor(binaryKnowledge) {
        this.binaryKnowledge = binaryKnowledge;
      };
      log(number) { // 템플릿 메서드 log: 세부 구현의 전체적인 알고리즘을 정의해놓았다.
        return this.whatIs(number);
      };
    }

    class BinaryPerson extends Person {
      whatIs(number) { // whatIs로 메서드명 통일
        return Number('0b' + number);
      };
    }

    class NomalPerson extends Person {
      whatIs(number) { // whatIs로 메서드명 통일
        return number;
      };
    }

    const binaryKnowledge = new BinaryPerson(true);
    const normalPerson = new NomalPerson(false);

    console.log(binaryKnowledge.log(10)); // 2
    console.log(normalPerson.log(10)); // 10
    ```